<!doctype html>
<html lang="pt-BR">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../public/css/bootstrap.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-bnUwFEMxWAFs3hAznZ2uoPkro2YfozJKJv9KYp+8W+0i6UivX+Y2TsGwVXDJGaJl" crossorigin="anonymous"></script>
    <title>Hortfruit Online:: Cadastro</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/favicon-16x16.png">
    <link rel="manifest" href="/img/favicon/site.webmanifest">
    <link rel="mask-icon" href="/img/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/img/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/img/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

</head>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const cpfInput = document.getElementById('txtCPF');
        const cnpjInput = document.getElementById('txtCNPJ');
        const telefone = document.getElementById('txtTelefone');
        const form = document.getElementById('FormRegistro');
        const errorMessage = document.getElementById('error-message');
      
    
        telefone.addEventListener('input', function() {
            applyMask(telefone, '(00) 0000-0000');
            if (telefone.value.length > 15) {
                telefone.value = telefone.value.slice(0, 15);
            }
        });

        cpfInput.addEventListener('input', function() {
    let value = cpfInput.value.replace(/\D/g, ''); // Remove todos os caracteres que não são dígitos
    if (value.length <= 11) {
        // Aplica a máscara de CPF (formato: 000.000.000-00)
        applyMask(cpfInput, '000.000.000-09');
        if (value.length > 11) {
            cpfInput.value = value.slice(0, 11);
        }
    } else {
        // Aplica a máscara de CNPJ (formato: 00.000.000/0000-00)
        applyMask(cpfInput, '00.000.000/0000-09');
        if (value.length > 14) {
            cpfInput.value = value.slice(0, 14);
        }
    }
});

        function applyMask(element, mask) {
            const value = element.value.replace(/\D/g, '');
            let newValue = '';
            let maskIndex = 0;
            for (let i = 0; i < value.length; i++) {
                if (mask[maskIndex] && mask[maskIndex].match(/\D/)) {
                    newValue += mask[maskIndex++];
                }
                newValue += value[i];
                maskIndex++;
            }
            element.value = newValue;
        }

      


        
    });
</script>
<body>
  <nav id="navbar"></nav>
<div class="bg-danger"> 
    <p class="text-white text-center py-1">Esta é uma loja de demonstração. Nenhum pedido será entregue.</p> 
</div> 
    <main class="mb-5 mt-4 pb-5 mb-md-0">

        <div class="container">
            <h1>Informe seus dados, por favor</h1>
            <hr>
            <form id="FormRegistro"  enctype="multipart/form-data">                
                <div class="row">
                    <div class="cpl-sm-12 col-md-6">
                        <fieldset class="row">
                            <legend>Dados Pessoais</legend>
                            <div class="mb-3">
                                <label for="txtNome" class="form-label">Nome</label>
                                <input type="text"  id="txtNome" class="form-control required">
                            </div>
                          <div class="mb-3">
                            <input type="checkbox" id="checkFornecedor" class="form-check-input" value="" >
                            <label for="checkFornecedor" class="form-check-label">Sou vendedor</label>
                        </div>
                            <div class="mb-3 col-md-6 col-xl-6">
                                <label for="txtCPF" class="form-label">CPF/CNPJ</label>
                               <span class="form-text">(somente números)</span>
                                <input type="text"  id="txtCPF"class="form-control" required>
                            </div>
                            <div class="mb-3 col-md-6 col-xl-6">
                                <label for="txtDataNascimento" class="form-label">Data de Nascimento</label>
                                <input type="date"  id="txtDataNascimento" class="form-control" required>
                            </div>
                        </fieldset>
                        <fieldset>
                            <legend>Contatos</legend>
                            <div class="mb-3 col-md-8">
                            <label for="txtEmail" class="form-label">Email</label>
                            <input type="email"  id="txtEmail" class="form-control" required>
                            </div>
                            <div class="mb-3 col-md-6">
                                <label for="txtTelefone" class="form-label">Telefone</label>
                                <input type="tel" id="txtTelefone" class="form-control" placeholder="(99)9999-9999"required>
                                <span class="form-text">(com DDD, somente números)</span>
                            </div>

                        </fieldset>
                    </div>
                    <div class="col-sm-12 col-md-6">
                        <fieldset class="row">
                            <legend>Endereço</legend>
                            <div class="mb-3 col-md-6 col-lg-4">
                                <label for="txtCEP" class="form-label">CEP</label>
                                <div class="input-group">
                                    <input type="text"  id="cep" class="form-control" required>
                                    <span class="input-group-text p-1">
                                        <svg class="bi" width="24" height="24" fill="currentColor">
                                            <use xlink: href="/bi.svg#hourglass-split"/>
                                        </svg>
                                    </span>
                                </div>
                                </div>
                                <div class="mb-3 col-md-6 col-lg-8 align-self-end">
                                    <textarea class="form-control text-muted bg-light" style="height: 68px;">Digite o CEP para buscarmos o endereço.</textarea>
                                </div>
<!-- Campos de endereço atualizados -->
<div class="mb-3 col-md-6 col-lg-8 align-self-end">
    <label for="txtRua" class="form-label">Rua</label>
    <input type="text" id="txtRua" class="form-control" required>
</div>
<div class="mb-3 col-md-4">
    <label for="txtCidade" class="form-label">Cidade</label>
    <input type="text" id="txtCidade" class="form-control" required>
</div>
<div class="mb-3 col-md-4">
    <label for="txtBairro" class="form-label">Bairro</label>
    <input type="text" id="txtBairro" class="form-control" required>
</div>
<div class="mb-3 col-md-4">
    <label for="txtEstado" class="form-label">Estado</label>
    <input type="text" id="txtEstado" class="form-control" required>
</div>
<div class="mb-3 col-md-4">
    <label for="txtNumero" class="form-label">Número</label>
    <input type="text" id="txtNumero" maxlength="15" pattern="\(\d{2}\)\s*\d{5}-\d{4}" class="form-control" required>
</div>
<div class="mb-3 col-md-8">
    <label for="txtComplemento" class="form-label">Complemento</label>
    <input type="text" id="txtComplemento" class="form-control">
</div>
<div class="mb-3">
    <label for="txtReferencia" class="form-label">Referência</label>
    <input type="text" id="txtReferencia" class="form-control">
</div>
                        </fieldset>
                        <fieldset>
                            <legend>Senha de Acesso</legend>
                            <div class="mb-3">
                                <label for="txtSenha" class="form-label">Senha</label>
                                <input type="text"  id="txtSenha" class="form-control" required>
                            </div>
                            <div class="mb-3">
                                <label for="txtCfSenha" class="form-label">Confirmação de Senha</label>
                                <input type="text"  id="txtCfSenha" class="form-control" required>
                            </div>
                            <div id="error-message" class="text-danger mt-3"></div>
                        </fieldset>
                    </div>
                </div>
                <hr>
                <div class="form-check mb-3">
                    <input type="checkbox" id="checkPromocoes" class="form-check-input" value="">
                    <label for="checkPromocoes" class="form-check-label">Desejo receber informações sobre promoções</label>
                </div>
                <div class="mb-3">
                    <a href="/" class="btn btn-light btn-outline-danger">Cancelar</a>

                    <button id="btnCadastrar"  type="submit" class="btn btn-md btn-danger " style="width: 150px;">Criar cadastro</button>                    
                </div>
                
<!-- Modal -->
<div class="modal fade" id="fornecedorModal" tabindex="-1" aria-labelledby="fornecedorModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="fornecedorModalLabel">Configurar Loja</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="nomeLoja" class="form-label">Nome da Loja</label>
                    <input type="text" id="nomeLoja" name="nomeLoja" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label for="descricaoLoja" class="form-label">Descrição da Loja</label>
                    <textarea id="descricaoLoja" name="descricaoLoja" class="form-control" required></textarea>
                </div>
                <div class="mb-3">
                    <label for="logoLoja" class="form-label">Logo da Loja</label>
                    <input type="file" id="logoLoja" name="logoLoja" class="form-control" accept="image/*">
                </div>
            </div>
        </div>
    </div>
            </form>
        </div>
    </main>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
    crossorigin="anonymous"></script>

<!-- Adicionando Javascript -->
<script>
    

$(document).ready(function() {

    function limpa_formulário_cep() {
        // Limpa valores do formulário de cep.
        $("#txtRua").val("");
        $("#txtCidade").val("");
        $('#txtBairro').val("")
        $("#txtEstado").val("");
    }
    
    //Quando o campo cep perde o foco.
    $("#cep").blur(function() {

        //Nova variável "cep" somente com dígitos.
        var cep = $(this).val().replace(/\D/g, '');

        //Verifica se campo cep possui valor informado.
        if (cep != "") {

            //Expressão regular para validar o CEP.
            var validacep = /^[0-9]{8}$/;

            //Valida o formato do CEP.
            if(validacep.test(cep)) {

                //Preenche os campos com "..." enquanto consulta webservice.
                $("#txtRua").val("...");
                $("#txtCidade").val("...");
                $('txtBairro').val("...")
                $("#txtEstado").val("...");

                //Consulta o webservice viacep.com.br/
                $.getJSON("https://viacep.com.br/ws/"+ cep +"/json/?callback=?", function(dados) {

                    if (!("erro" in dados)) {
                        //Atualiza os campos com os valores da consulta.
                        $("#txtRua").val(dados.logradouro);
                        $("#txtBairro").val(dados.bairro);
                        $("#txtCidade").val(dados.localidade);
                        $("#txtEstado").val(dados.uf);
                    } //end if.
                    else {
                        //CEP pesquisado não foi encontrado.
                        limpa_formulário_cep();
                        alert("CEP não encontrado.");
                    }
                });
            } //end if.
            else {
                //cep é inválido.
                limpa_formulário_cep();
                alert("Formato de CEP inválido.");
            }
        } //end if.
        else {
            //cep sem valor, limpa formulário.
            limpa_formulário_cep();
        }
    });
});

</script>    
<script src="../public/js/enviarCadastro.js">
    </script>
             <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
<div style="height: 273px;" class="d-block d-md-none"></div>
    <div style="height: 153px;" class="d-none d-md-block d-lg-none"></div>
    <div class="d-none d-lg-block"></div>

    <footer id="footer"></footer>
    

    <script src="../public/js/footerPartials.js"></script>
    <script src="../public/js/navPartials.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"></script>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.bundle.js"></script>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.bundle.js"></script>

</body>

</html>